"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/support-chat";
exports.ids = ["pages/api/support-chat"];
exports.modules = {

/***/ "(api-node)/../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsupport-chat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsupport-chat.ts&middlewareConfigBase64=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************!*\
  !*** ../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsupport-chat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsupport-chat.ts&middlewareConfigBase64=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/../node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/../node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/../node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_support_chat_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/support-chat.ts */ \"(api-node)/./pages/api/support-chat.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_support_chat_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_support_chat_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/support-chat\",\n        pathname: \"/api/support-chat\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_support_chat_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnN1cHBvcnQtY2hhdCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGc3VwcG9ydC1jaGF0LnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQ3dEO0FBQ3hEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx1REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsdURBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvc3VwcG9ydC1jaGF0LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zdXBwb3J0LWNoYXRcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zdXBwb3J0LWNoYXRcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsupport-chat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsupport-chat.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/support-chat.ts":
/*!***********************************!*\
  !*** ./pages/api/support-chat.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// Function to read markdown files\nfunction readMarkdownFiles(dir) {\n    try {\n        let content = '';\n        const items = fs__WEBPACK_IMPORTED_MODULE_0___default().readdirSync(dir);\n        for (const item of items){\n            const fullPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(dir, item);\n            const stat = fs__WEBPACK_IMPORTED_MODULE_0___default().statSync(fullPath);\n            if (stat.isDirectory()) {\n                // Skip hidden directories and node_modules\n                if (!item.startsWith('.') && item !== 'node_modules') {\n                    content += readMarkdownFiles(fullPath);\n                }\n            } else if (stat.isFile() && item.endsWith('.md')) {\n                content += `\\n# ${item}\\n${fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(fullPath, 'utf-8')}\\n`;\n            }\n        }\n        return content;\n    } catch (error) {\n        console.log('Documentation not found, using default content');\n        return '';\n    }\n}\n// Load documentation content with fallback\nlet DOCS_CONTENT = '';\ntry {\n    const docsDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), '../../docs');\n    DOCS_CONTENT = readMarkdownFiles(docsDir);\n    console.log('Successfully loaded core documentation content');\n} catch (error) {\n    console.log('Using default documentation content');\n}\nconst SUPPORT_SYSTEM_MESSAGE = `You are PHEME Support, a helpful AI assistant for the PHEME protocol. Your role is to:\n\n1. Help users with general questions about PHEME\n2. Assist with technical issues\n3. Guide users through the platform features\n4. Explain the protocol's components\n5. Provide helpful resources and documentation links\n\nKey Information:\n- Website: https://phemeai.xyz\n- Documentation: https://docs.phemeai.xyz\n- GitHub: https://github.com/PhemeAI\n- Support Email: support@phemeai.xyz\n\n${DOCS_CONTENT ? `Documentation Content:\\n${DOCS_CONTENT}\\n` : ''}\n\nAlways be:\n- Professional and friendly\n- Clear and concise\n- Helpful and solution-oriented\n- Patient and understanding\n- Knowledgeable about PHEME's features\n${DOCS_CONTENT ? '- Base your responses on the provided documentation content' : ''}\n\nWhen answering questions:\n1. ${DOCS_CONTENT ? 'First check the documentation content for relevant information' : 'Use your general knowledge about blockchain and web3'}\n2. ${DOCS_CONTENT ? 'Provide specific references to documentation sections when applicable' : 'Explain concepts clearly and concisely'}\n3. If you cannot help with a specific issue, guide users to email support@phemeai.xyz\n\n${DOCS_CONTENT ? 'Remember to cite specific documentation sections when providing information from them.' : ''}`;\nasync function handler(req, res) {\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            error: 'Method not allowed'\n        });\n    }\n    const apiKey = process.env.OPENAI_API_KEY;\n    if (!apiKey) {\n        console.error('OpenAI API key not configured');\n        return res.status(500).json({\n            error: 'Support chat service not configured'\n        });\n    }\n    const { message } = req.body;\n    if (!message || typeof message !== 'string') {\n        return res.status(400).json({\n            error: 'Invalid message'\n        });\n    }\n    try {\n        const response = await fetch(\"https://api.openai.com/v1/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${apiKey}`,\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                model: \"gpt-3.5-turbo-16k\",\n                messages: [\n                    {\n                        role: \"system\",\n                        content: SUPPORT_SYSTEM_MESSAGE\n                    },\n                    {\n                        role: \"user\",\n                        content: message\n                    }\n                ],\n                temperature: 0.7\n            })\n        });\n        const data = await response.json();\n        if (!response.ok) {\n            console.error('OpenAI API error:', data.error);\n            return res.status(response.status).json({\n                error: 'Failed to get response from support service',\n                details: data.error?.message\n            });\n        }\n        const reply = data.choices?.[0]?.message?.content;\n        if (!reply) {\n            return res.status(500).json({\n                error: 'No reply received from support service'\n            });\n        }\n        res.status(200).json({\n            reply\n        });\n    } catch (error) {\n        console.error('Support chat API error:', error);\n        res.status(500).json({\n            error: 'Internal server error'\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVNVLEVBQUUsRUFBRTtZQUNoQjVCLFFBQVFELEtBQUssQ0FBQyxxQkFBcUI0QixLQUFLNUIsS0FBSztZQUM3QyxPQUFPVSxJQUFJRSxNQUFNLENBQUNPLFNBQVNQLE1BQU0sRUFBRUMsSUFBSSxDQUFDO2dCQUN0Q2IsT0FBTztnQkFDUDhCLFNBQVNGLEtBQUs1QixLQUFLLEVBQUVpQjtZQUN2QjtRQUNGO1FBRUEsTUFBTWMsUUFBUUgsS0FBS0ksT0FBTyxFQUFFLENBQUMsRUFBRSxFQUFFZixTQUFTOUI7UUFDMUMsSUFBSSxDQUFDNEMsT0FBTztZQUNWLE9BQU9yQixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFYixPQUFPO1lBQXlDO1FBQ2hGO1FBRUFVLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRWtCO1FBQU07SUFDL0IsRUFBRSxPQUFPL0IsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsMkJBQTJCQTtRQUN6Q1UsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFYixPQUFPO1FBQXdCO0lBQ3hEO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hYmlvZHVub3llcmluZGUvRGVza3RvcC9waGVtZS9QaGVtZS1Qcm90b2NvbC9mcm9udGVuZC9wYWdlcy9hcGkvc3VwcG9ydC1jaGF0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG4vLyBGdW5jdGlvbiB0byByZWFkIG1hcmtkb3duIGZpbGVzXG5mdW5jdGlvbiByZWFkTWFya2Rvd25GaWxlcyhkaXI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHRyeSB7XG4gICAgbGV0IGNvbnRlbnQgPSAnJztcbiAgICBjb25zdCBpdGVtcyA9IGZzLnJlYWRkaXJTeW5jKGRpcik7XG5cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgIGNvbnN0IGZ1bGxQYXRoID0gcGF0aC5qb2luKGRpciwgaXRlbSk7XG4gICAgICBjb25zdCBzdGF0ID0gZnMuc3RhdFN5bmMoZnVsbFBhdGgpO1xuXG4gICAgICBpZiAoc3RhdC5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgIC8vIFNraXAgaGlkZGVuIGRpcmVjdG9yaWVzIGFuZCBub2RlX21vZHVsZXNcbiAgICAgICAgaWYgKCFpdGVtLnN0YXJ0c1dpdGgoJy4nKSAmJiBpdGVtICE9PSAnbm9kZV9tb2R1bGVzJykge1xuICAgICAgICAgIGNvbnRlbnQgKz0gcmVhZE1hcmtkb3duRmlsZXMoZnVsbFBhdGgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHN0YXQuaXNGaWxlKCkgJiYgaXRlbS5lbmRzV2l0aCgnLm1kJykpIHtcbiAgICAgICAgY29udGVudCArPSBgXFxuIyAke2l0ZW19XFxuJHtmcy5yZWFkRmlsZVN5bmMoZnVsbFBhdGgsICd1dGYtOCcpfVxcbmA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ0RvY3VtZW50YXRpb24gbm90IGZvdW5kLCB1c2luZyBkZWZhdWx0IGNvbnRlbnQnKTtcbiAgICByZXR1cm4gJyc7XG4gIH1cbn1cblxuLy8gTG9hZCBkb2N1bWVudGF0aW9uIGNvbnRlbnQgd2l0aCBmYWxsYmFja1xubGV0IERPQ1NfQ09OVEVOVCA9ICcnO1xudHJ5IHtcbiAgY29uc3QgZG9jc0RpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnLi4vLi4vZG9jcycpO1xuICBET0NTX0NPTlRFTlQgPSByZWFkTWFya2Rvd25GaWxlcyhkb2NzRGlyKTtcbiAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBsb2FkZWQgY29yZSBkb2N1bWVudGF0aW9uIGNvbnRlbnQnKTtcbn0gY2F0Y2ggKGVycm9yKSB7XG4gIGNvbnNvbGUubG9nKCdVc2luZyBkZWZhdWx0IGRvY3VtZW50YXRpb24gY29udGVudCcpO1xufVxuXG5jb25zdCBTVVBQT1JUX1NZU1RFTV9NRVNTQUdFID0gYFlvdSBhcmUgUEhFTUUgU3VwcG9ydCwgYSBoZWxwZnVsIEFJIGFzc2lzdGFudCBmb3IgdGhlIFBIRU1FIHByb3RvY29sLiBZb3VyIHJvbGUgaXMgdG86XG5cbjEuIEhlbHAgdXNlcnMgd2l0aCBnZW5lcmFsIHF1ZXN0aW9ucyBhYm91dCBQSEVNRVxuMi4gQXNzaXN0IHdpdGggdGVjaG5pY2FsIGlzc3Vlc1xuMy4gR3VpZGUgdXNlcnMgdGhyb3VnaCB0aGUgcGxhdGZvcm0gZmVhdHVyZXNcbjQuIEV4cGxhaW4gdGhlIHByb3RvY29sJ3MgY29tcG9uZW50c1xuNS4gUHJvdmlkZSBoZWxwZnVsIHJlc291cmNlcyBhbmQgZG9jdW1lbnRhdGlvbiBsaW5rc1xuXG5LZXkgSW5mb3JtYXRpb246XG4tIFdlYnNpdGU6IGh0dHBzOi8vcGhlbWVhaS54eXpcbi0gRG9jdW1lbnRhdGlvbjogaHR0cHM6Ly9kb2NzLnBoZW1lYWkueHl6XG4tIEdpdEh1YjogaHR0cHM6Ly9naXRodWIuY29tL1BoZW1lQUlcbi0gU3VwcG9ydCBFbWFpbDogc3VwcG9ydEBwaGVtZWFpLnh5elxuXG4ke0RPQ1NfQ09OVEVOVCA/IGBEb2N1bWVudGF0aW9uIENvbnRlbnQ6XFxuJHtET0NTX0NPTlRFTlR9XFxuYCA6ICcnfVxuXG5BbHdheXMgYmU6XG4tIFByb2Zlc3Npb25hbCBhbmQgZnJpZW5kbHlcbi0gQ2xlYXIgYW5kIGNvbmNpc2Vcbi0gSGVscGZ1bCBhbmQgc29sdXRpb24tb3JpZW50ZWRcbi0gUGF0aWVudCBhbmQgdW5kZXJzdGFuZGluZ1xuLSBLbm93bGVkZ2VhYmxlIGFib3V0IFBIRU1FJ3MgZmVhdHVyZXNcbiR7RE9DU19DT05URU5UID8gJy0gQmFzZSB5b3VyIHJlc3BvbnNlcyBvbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnRhdGlvbiBjb250ZW50JyA6ICcnfVxuXG5XaGVuIGFuc3dlcmluZyBxdWVzdGlvbnM6XG4xLiAke0RPQ1NfQ09OVEVOVCA/ICdGaXJzdCBjaGVjayB0aGUgZG9jdW1lbnRhdGlvbiBjb250ZW50IGZvciByZWxldmFudCBpbmZvcm1hdGlvbicgOiAnVXNlIHlvdXIgZ2VuZXJhbCBrbm93bGVkZ2UgYWJvdXQgYmxvY2tjaGFpbiBhbmQgd2ViMyd9XG4yLiAke0RPQ1NfQ09OVEVOVCA/ICdQcm92aWRlIHNwZWNpZmljIHJlZmVyZW5jZXMgdG8gZG9jdW1lbnRhdGlvbiBzZWN0aW9ucyB3aGVuIGFwcGxpY2FibGUnIDogJ0V4cGxhaW4gY29uY2VwdHMgY2xlYXJseSBhbmQgY29uY2lzZWx5J31cbjMuIElmIHlvdSBjYW5ub3QgaGVscCB3aXRoIGEgc3BlY2lmaWMgaXNzdWUsIGd1aWRlIHVzZXJzIHRvIGVtYWlsIHN1cHBvcnRAcGhlbWVhaS54eXpcblxuJHtET0NTX0NPTlRFTlQgPyAnUmVtZW1iZXIgdG8gY2l0ZSBzcGVjaWZpYyBkb2N1bWVudGF0aW9uIHNlY3Rpb25zIHdoZW4gcHJvdmlkaW5nIGluZm9ybWF0aW9uIGZyb20gdGhlbS4nIDogJyd9YDtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihcbiAgcmVxOiBOZXh0QXBpUmVxdWVzdCxcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2Vcbikge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9XG5cbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVk7XG4gIGlmICghYXBpS2V5KSB7XG4gICAgY29uc29sZS5lcnJvcignT3BlbkFJIEFQSSBrZXkgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ1N1cHBvcnQgY2hhdCBzZXJ2aWNlIG5vdCBjb25maWd1cmVkJyB9KTtcbiAgfVxuXG4gIGNvbnN0IHsgbWVzc2FnZSB9ID0gcmVxLmJvZHk7XG5cbiAgaWYgKCFtZXNzYWdlIHx8IHR5cGVvZiBtZXNzYWdlICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBtZXNzYWdlJyB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcImh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9uc1wiLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogYEJlYXJlciAke2FwaUtleX1gLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbW9kZWw6IFwiZ3B0LTMuNS10dXJiby0xNmtcIixcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7IHJvbGU6IFwic3lzdGVtXCIsIGNvbnRlbnQ6IFNVUFBPUlRfU1lTVEVNX01FU1NBR0UgfSxcbiAgICAgICAgICB7IHJvbGU6IFwidXNlclwiLCBjb250ZW50OiBtZXNzYWdlIH1cbiAgICAgICAgXSxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuNyxcbiAgICAgIH0pLFxuICAgIH0pO1xuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ09wZW5BSSBBUEkgZXJyb3I6JywgZGF0YS5lcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyhyZXNwb25zZS5zdGF0dXMpLmpzb24oeyBcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gZ2V0IHJlc3BvbnNlIGZyb20gc3VwcG9ydCBzZXJ2aWNlJyxcbiAgICAgICAgZGV0YWlsczogZGF0YS5lcnJvcj8ubWVzc2FnZSBcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHJlcGx5ID0gZGF0YS5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LmNvbnRlbnQ7XG4gICAgaWYgKCFyZXBseSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdObyByZXBseSByZWNlaXZlZCBmcm9tIHN1cHBvcnQgc2VydmljZScgfSk7XG4gICAgfVxuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyByZXBseSB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBwb3J0IGNoYXQgQVBJIGVycm9yOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwicmVhZE1hcmtkb3duRmlsZXMiLCJkaXIiLCJjb250ZW50IiwiaXRlbXMiLCJyZWFkZGlyU3luYyIsIml0ZW0iLCJmdWxsUGF0aCIsImpvaW4iLCJzdGF0Iiwic3RhdFN5bmMiLCJpc0RpcmVjdG9yeSIsInN0YXJ0c1dpdGgiLCJpc0ZpbGUiLCJlbmRzV2l0aCIsInJlYWRGaWxlU3luYyIsImVycm9yIiwiY29uc29sZSIsImxvZyIsIkRPQ1NfQ09OVEVOVCIsImRvY3NEaXIiLCJwcm9jZXNzIiwiY3dkIiwiU1VQUE9SVF9TWVNURU1fTUVTU0FHRSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiYXBpS2V5IiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJtZXNzYWdlIiwiYm9keSIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwidGVtcGVyYXR1cmUiLCJkYXRhIiwib2siLCJkZXRhaWxzIiwicmVwbHkiLCJjaG9pY2VzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/support-chat.ts\n");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsupport-chat&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsupport-chat.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();